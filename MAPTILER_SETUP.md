# Настройка MapTiler

Приложение теперь использует MapTiler для карт и геокодинга вместо 2GIS.

## Получение API ключа MapTiler

1. Зарегистрируйтесь на [MapTiler Cloud](https://cloud.maptiler.com/auth/widget)
2. Создайте новый проект
3. Скопируйте API ключ из раздела "Credentials"

**Важно:** MapTiler предоставляет бесплатный тарифный план с 100,000 запросов карт в месяц и достаточным лимитом на геокодинг.

## Настройка ключей

### Мобильное приложение (Expo)

Добавьте в файл `app.json`:
```json
{
  "expo": {
    "extra": {
      "maptilerApiKey": "YOUR_MAPTILER_API_KEY_HERE"
    }
  }
}
```

Или используйте переменную окружения:
```bash
export MAPTILER_API_KEY="your_maptiler_api_key"
```

### Backend (Python)

Создайте файл `.env` в папке `server_py/`:
```
MAPTILER_API_KEY=your_maptiler_api_key
```

Или установите переменную окружения:
```bash
# Windows PowerShell
$env:MAPTILER_API_KEY="your_maptiler_api_key"

# Linux/Mac
export MAPTILER_API_KEY="your_maptiler_api_key"
```

## Возможности MapTiler

### Карты
- **Векторные тайлы:** Современные, четкие карты с поддержкой WebGL
- **Стили:** streets-v2 (по умолчанию), basic, bright, satellite, topo и другие
- **Детализация:** Отличное покрытие для Кыргызстана с актуальными данными OSM
- **3D рельеф:** Поддержка отображения рельефа местности

### Геокодирование
- **Forward geocoding:** Поиск адресов и мест по тексту
- **Reverse geocoding:** Получение адреса по координатам
- **Autocomplete:** Подсказки при вводе адресов
- **POI Search:** Поиск точек интереса (магазины, рестораны и т.д.)
- **Язык:** Поддержка русского языка через параметр `language=ru`
- **Bbox фильтрация:** Ограничение поиска регионом Кыргызстана

## Изменение стиля карты

Чтобы изменить стиль карты, обновите `app.config.js`:

```javascript
mapTiles: {
  provider: 'maptiler',
  apiKey: maptilerKey,
  style: 'basic', // или 'streets-v2', 'bright', 'satellite', 'topo'
}
```

Доступные стили:
- `streets-v2` (по умолчанию) — детальная городская карта
- `basic` — простой, минималистичный стиль
- `bright` — яркая карта для дневного времени
- `satellite` — спутниковые снимки
- `topo` — топографическая карта с рельефом
- `outdoor` — карта для активного отдыха

Полный список: https://cloud.maptiler.com/maps/

## Отличия от 2GIS

### Преимущества MapTiler:
- ✅ Современный векторный рендеринг
- ✅ Актуальные данные OpenStreetMap
- ✅ Бесплатный тарифный план с большими лимитами
- ✅ Лучшее покрытие сельских районов
- ✅ Поддержка различных стилей карт
- ✅ Надежный геокодинг с автодополнением
- ✅ Глобальное покрытие (не только СНГ)

### Ограничения:
- ⚠️ Меньше POI для мелких бизнесов в Кыргызстане по сравнению с 2GIS
- ⚠️ 2GIS может иметь более актуальные данные для некоторых городских организаций

## Бесплатный тарифный план MapTiler

- 100,000 загрузок тайлов карт в месяц
- Достаточно для ~3,000-5,000 активных пользователей в день
- Геокодинг входит в основной лимит
- Нет ограничения по количеству API ключей
- Доступны все стили карт

## Документация API

- **Maps API:** https://docs.maptiler.com/cloud/api/maps/
- **Geocoding API:** https://docs.maptiler.com/cloud/api/geocoding/
- **SDK Documentation:** https://docs.maptiler.com/
